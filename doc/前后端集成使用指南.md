# 前后端集成使用指南

## 📋 功能概述

DataPulse 平台现已集成前后端，支持：
- ✅ 项目搜索和切换
- ✅ 数据可视化展示
- ✅ AI 智能问答
- ✅ 美观的现代化界面

---

## 🚀 快速开始

### 1. 启动后端服务

```bash
cd Datapulse/backend
python app.py
```

后端服务将在 `http://localhost:5000` 启动。

### 2. 启动前端服务

```bash
cd Datapulse/frontend
npm install  # 首次运行需要安装依赖
npm run dev
```

前端服务将在 `http://localhost:5173` 启动（或提示的其他端口）。

### 3. 访问平台

打开浏览器访问前端地址，默认会展示 `X-lab2017/open-digger` 项目的数据。

---

## 🎯 主要功能

### 1. 项目搜索

- **位置**：页面顶部搜索框
- **功能**：
  - 点击搜索框，显示所有可用项目列表
  - 输入关键词实时搜索项目
  - 选择项目后自动加载数据

### 2. 数据展示

平台提供三个主要视图：

#### 📊 时序分析
- 展示项目的各种指标随时间的变化趋势
- 支持按指标类型分组查看
- 点击时间点可跳转到对应的 Issue 分析

#### 📝 Issue 分析
- 按月展示 Issue 数据
- 显示标签分类、关键词、重大事件
- 支持选择特定月份查看详情

#### 📈 波动归因
- 识别指标的显著变化
- 关联对应月份的 Issue 文本
- 提供变化原因分析

### 3. AI 智能问答

- **位置**：页面右上角聊天图标
- **功能**：
  - 点击图标打开 AI 助手侧边栏
  - 可以询问项目相关问题：
    - 项目基本信息
    - 统计数据
    - Issue 情况
    - 时序趋势
  - AI 会基于项目数据提供答案

---

## 📁 数据存储

所有项目数据统一存储在：
```
Datapulse/backend/DataProcessor/data/
├── {owner}_{repo}/                          # 项目文件夹
│   ├── {owner}_{repo}_text_data_YYYYMMDD_HHMMSS.json    # 原始JSON
│   ├── {owner}_{repo}_text_data_YYYYMMDD_HHMMSS.xlsx    # Excel数据
│   └── {owner}_{repo}_text_data_YYYYMMDD_HHMMSS_processed/  # 处理后数据
│       ├── timeseries_data.json             # 时序数据
│       ├── text_data_structured.json       # 结构化文本数据
│       ├── text_data_for_training.txt      # 训练用文本
│       └── processing_summary.json         # 处理摘要
```

---

## 🔧 API 接口

### 项目相关

- `GET /api/projects` - 获取所有项目列表
- `GET /api/projects/search?q={query}` - 搜索项目
- `GET /api/project/{project_name}/summary` - 获取项目摘要

### 数据相关

- `GET /api/repo/{repo_key}/summary` - 获取仓库摘要
- `GET /api/timeseries/grouped/{repo_key}` - 获取分组时序数据
- `GET /api/issues/{repo_key}` - 获取 Issue 数据
- `GET /api/analysis/{repo_key}` - 获取波动分析

### AI 问答

- `POST /api/qa` - AI 问答接口
  ```json
  {
    "question": "项目有多少个Issue？",
    "project": "X-lab2017_open-digger"
  }
  ```

---

## 💡 使用技巧

1. **快速切换项目**
   - 点击顶部搜索框
   - 输入项目名称关键词
   - 选择项目即可

2. **查看详细信息**
   - 在时序图表中点击时间点
   - 自动跳转到 Issue 分析页面
   - 查看该月份的详细数据

3. **使用 AI 助手**
   - 点击右上角聊天图标
   - 输入问题，例如：
     - "这个项目有多少个文档？"
     - "项目的基本信息是什么？"
     - "最新的Issue是什么？"

---

## 🎨 界面特色

- **现代化设计**：采用赛博朋克风格，视觉效果出色
- **响应式布局**：适配不同屏幕尺寸
- **流畅动画**：使用 Framer Motion 提供流畅的交互动画
- **实时反馈**：加载状态、错误提示等完善的用户反馈

---

## ⚠️ 注意事项

1. **数据格式**：确保数据文件在正确的目录下，且包含 `_processed` 文件夹
2. **项目命名**：项目文件夹名称格式为 `{owner}_{repo}`
3. **后端依赖**：确保安装了所有 Python 依赖（见 `requirements.txt`）
4. **前端依赖**：确保安装了所有 Node.js 依赖（运行 `npm install`）

---

## 🐛 常见问题

### Q: 搜索不到项目？
A: 检查 `Datapulse/backend/DataProcessor/data/` 目录下是否有项目文件夹，且包含 `_processed` 文件夹。

### Q: AI 问答没有响应？
A: 确保后端服务正常运行，且项目数据已正确加载。

### Q: 数据展示为空？
A: 检查项目数据文件是否完整，特别是 `timeseries_data.json` 和 `text_data_structured.json`。

---

## 📞 获取帮助

如有问题，请检查：
1. 后端控制台输出
2. 浏览器开发者工具（F12）
3. 数据文件是否完整

---

**祝使用愉快！** 🎉

